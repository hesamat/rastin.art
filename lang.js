// Language translations
const translations = {
    fa: {
        nav: {
            programs: "برنامه‌ها",
            teaching: "آموزش",
            albums: "آلبوم‌ها",
            about: "درباره",
            research: "پژوهش‌ها"
        },
        hero: {
            name: "علیرضا راستین‌فر",
            subtitle: "آهنگساز، نوازنده و مدرس ساز و آواز ایرانی"
        },
        bio: {
            title: "درباره استاد راستین‌فر",
            p1: "علیرضا راستین‌فر، آهنگساز، نوازنده و مدرس برجسته ساز و آواز ایرانی است. او دانش موسیقی خود را در محضر بزرگ‌ترین اساتید زمان خود تکمیل کرده و در نوازندگی تار از اساتیدی چون هوشنگ ظریف، محمدرضا لطفی، ارشد طهماسبی، کیوان ساکت و مسعود شعاری بهره برده است.",
            p2: "در زمینه آواز، ردیف آوازی را نزد استاد حاتم عسگری فراهانی فرا گرفته و ظرایف خوانندگی را از محضر آقایان امیر شیخ‌الاسلام و رامبد صدیف آموخته است. فعالیت‌های حرفه‌ای او طیف گسترده‌ای از پژوهش، اجرا، آموزش و سازسازی را در بر می‌گیرد."
        },
        classes: {
            title: "آموزش",
            btn: "ثبت‌نام در کلاس",
            work1: {
                title: "آموزشگاه دل‌آرام",
                desc: "آموزش تخصصی در زمینه آواز ایرانی و نوازندگی تار از مبتدی تا پیشرفته، شامل تکنیک‌ها، ردیف و بداهه‌نوازی."
            },
        },
        events: {
            title: "برنامه‌ها",
            event1: {
                title: "کنسرت بهار",
                desc: "اجرای قطعاتی از آلبوم‌های در مسیر فصل‌ها و حکایت عشق",
                location: "تالار وحدت",
                date: "۱۵ فروردین",
                time: "۲۰:۰۰"
            },
            event2: {
                title: "کارگاه آموزش تار",
                desc: "کارگاه فشرده آموزش تار برای سطح مبتدی",
                location: "آموزشگاه راستین‌فر",
                date: "۲۲ اردیبهشت",
                time: "۱۶:۰۰"
            },
            event3: {
                title: "شب موسیقی ایرانی",
                desc: "اجرای گروهی با همراهی هنرمندان برجسته موسیقی ایرانی",
                location: "تالار رودکی",
                date: "۵ خرداد",
                time: "۲۱:۰۰"
            }
        },
        news: {
            title: "اخبار",
            news1: {
                title: "انتشار آلبوم جدید استاد راستین‌فر",
                desc: "آلبوم جدید استاد علیرضا راستین‌فر با عنوان «شب و خاموشی» منتشر شد.",
                date: "۱۰ اردیبهشت ۱۴۰۱"
            },
            news2: {
                title: "مصاحبه با ماهنامه موسیقی",
                desc: "مصاحبه مفصل با استاد راستین‌فر در مورد تاریخ موسیقی ایرانی و چالش‌های پیش روی آن.",
                date: "۲۵ فروردین ۱۴۰۱"
            },
            news3: {
                title: "برگزاری مسترکلاس در دانشگاه هنر",
                desc: "استاد راستین‌فر مسترکلاسی را در دانشگاه هنر تهران با موضوع «ردیف موسیقی ایرانی» برگزار کرد.",
                date: "۵ فروردین ۱۴۰۱"
            }
        },
        research: {
            title: "پژوهش‌ها",
            work1: {
                title: "تدوین آثار درویش‌خان",
                desc: "جمع‌آوری و تدوین آثار استاد درویش‌خان، یکی از بزرگ‌ترین اساتید موسیقی ایرانی و احیاء میراث هنری ایشان برای نسل‌های آینده."
            },
            work2: {
                title: "آوانگاری ردیف آوازی",
                desc: "آوانگاری بخشی از ردیف آوازی استاد رامبد صدیف و ثبت نت‌های موسیقی برای حفظ امانت‌داری در انتقال این میراث ارزشمند."
            },
            work3: {
                title: "سازسازی سه‌تار",
                desc: "تأسیس کارگاه سازسازی پس از گذراندن دوره تخصصی سه‌تار در وزارت میراث فرهنگی و گردشگری و ساخت سازهای اصیل با کیفیت بالا."
            }
        },
        albums: {
            title: "آلبوم‌ها",
            badge: "آلبوم",
            album1: {
                title: "در مسیر فصل‌ها",
                desc: "آلبومی با الهام از تغییرات طبیعت و گذر زمان",
                year: "۱۳۹۳"
            },
            album2: {
                title: "گمگشته",
                desc: "کاوش در مفاهیم گم‌گشتگی و یافتن راه",
                year: "۱۳۹۹"
            },
            album3: {
                title: "حکایت عشق",
                desc: "روایتی از عشق در موسیقی ایرانی",
                year: "۱۴۰۰"
            },
            album4: {
                title: "شب و خاموشی",
                desc: "تامل در سکوت شب و زیبایی‌های آن",
                year: "۱۳۹۵"
            }
        },
        quote: {
            text: "گفتاورد",
            author: "علیرضا راستین‌فر"
        },
        footer: {
            institute: "مؤسسه نغمه همایون راستین",
            email: "ایمیل:",
            follow: "دنبال کنید",
            social: "ما را در شبکه‌های اجتماعی دنبال کنید:",
            copyright: "© ۱۴۰۴ - تمامی حقوق مادی و معنوی این وبسایت متعلق به مؤسسه فرهنگی هنری نغمه همایون راستین است"
        }
    },
    en: {
        nav: {
            programs: "Events",
            teaching: "Teaching",
            albums: "Albums",
            about: "About",
            research: "Research"
        },
        hero: {
            name: "Alireza Rastinfar",
            subtitle: "Composer, Performer and Master of Iranian Instruments and Vocals"
        },
        bio: {
            title: "About Master Rastinfar",
            p1: "Alireza Rastinfar is a prominent composer, performer, and master of Iranian instruments and vocals. He completed his musical education under the greatest masters of his time and learned to play the Tar from masters such as Houshang Zarif, Mohammad Reza Lotfi, Arshad Tahmasebi, Kayvan Saket, and Masoud Shariari.",
            p2: "In the field of vocals, he learned the vocal Radif from Master Hatam Asgari Farahani and learned the subtleties of singing from Amir Sheikholeslam and Rambod Sadif. His professional activities encompass a wide range of research, performance, education, and instrument making."
        },
        classes: {
            title: "Teaching Classes",
            work1: {
                title: "Delaram Music",
                desc: "Specialized training in Iranian vocals and Tar playing from beginner to advanced levels, including techniques, Radif, and improvisation."
            },
            btn: "Register for Class"
        },
        events: {
            title: "Events",
            event1: {
                title: "Yara Charity Event",
                desc: "",
                location: "Lily Lee Spirit Room, 2121 Marine Dr, West Vancouver",
                date: "September 14",
                time: "18:00 - 20:00"
            },
            event2: {
                title: "Tar Workshop",
                desc: "Intensive Tar workshop for beginner level",
                location: "Rastinfar Music School",
                date: "May 12",
                time: "16:00"
            },
            event3: {
                title: "Iranian Music Night",
                desc: "Group performance with prominent Iranian music artists",
                location: "Roudaki Hall",
                date: "May 26",
                time: "21:00"
            }
        },
        news: {
            title: "News",
            news1: {
                title: "Release of Master Rastinfar's New Album",
                desc: "Master Alireza Rastinfar's new album titled \"Night and Silence\" has been released.",
                date: "April 30, 2022"
            },
            news2: {
                title: "Interview with Music Monthly",
                desc: "An extensive interview with Master Rastinfar about the history of Iranian music and its challenges.",
                date: "April 15, 2022"
            },
            news3: {
                title: "Masterclass at the University of Art",
                desc: "Master Rastinfar held a masterclass at the University of Art Tehran on the topic of \"Iranian Music Radif\".",
                date: "March 25, 2022"
            }
        },
        research: {
            title: "Research",
            work1: {
                title: "Compiling Darvish Khan's Works",
                desc: "Collecting and compiling the works of Master Darvish Khan, one of the greatest masters of Iranian music, and reviving his artistic heritage for future generations."
            },
            work2: {
                title: "Notation of Vocal Radif",
                desc: "Notation of part of Master Rambod Sadif's vocal Radif and recording musical notes to preserve integrity in transmitting this valuable heritage."
            },
            work3: {
                title: "Setar Instrument Making",
                desc: "Establishing an instrument-making workshop after completing a specialized Setar course at the Ministry of Cultural Heritage and Tourism, and making authentic instruments with high quality."
            }
        },
        albums: {
            title: "Albums",
            badge: "Album",
            album1: {
                title: "In the Path of Seasons",
                desc: "An album inspired by nature's changes and the passage of time",
                year: "2014"
            },
            album2: {
                title: "The Lost",
                desc: "Exploring concepts of being lost and finding one's way",
                year: "2020"
            },
            album3: {
                title: "The Tale of Love",
                desc: "A narrative of love in Iranian music",
                year: "2021"
            },
            album4: {
                title: "Night and Silence",
                desc: "Contemplation on the silence of the night and its beauties",
                year: "2016"
            }
        },
        quote: {
            text: "Full Quote",
            author: "Alireza Rastinfar"
        },
        footer: {
            institute: "Naghmeh Homayoon Rastin Cultural Institute",
            email: "Email: ",
            follow: "Follow Us",
            social: "Follow us on social media:",
            copyright: "© 2025 - All material and intellectual rights of this website belong to Naghmeh Homayoon Rastin Cultural Institute"
        }
    }
};

// Language toggle functionality
const langToggle = document.getElementById('langToggle');
const htmlElement = document.documentElement;
let currentLang = 'fa';

function updateLanguage(lang) {
    currentLang = lang;
    htmlElement.setAttribute('lang', lang);

    if (lang === 'en') {
        htmlElement.setAttribute('dir', 'ltr');
        document.body.classList.add('en');
        langToggle.textContent = 'فارسی';
    } else {
        htmlElement.setAttribute('dir', 'rtl');
        document.body.classList.remove('en');
        langToggle.textContent = 'EN';
    }

    // Update all elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const keys = element.getAttribute('data-i18n').split('.');
        let translation = translations[lang];

        for (const key of keys) {
            if (translation[key] !== undefined) {
                translation = translation[key];
            } else {
                translation = null;
                break;
            }
        }

        if (translation) {
            element.textContent = translation;
        }
    });
}

langToggle.addEventListener('click', () => {
    const newLang = currentLang === 'fa' ? 'en' : 'fa';
    updateLanguage(newLang);
});

// Hero carousel functionality
const slides = document.querySelectorAll('.carousel-slide');
const indicators = document.querySelectorAll('.indicator');
let currentSlide = 0;

function showSlide(index) {
    slides.forEach(slide => slide.classList.remove('active'));
    indicators.forEach(indicator => indicator.classList.remove('active'));

    slides[index].classList.add('active');
    indicators[index].classList.add('active');
    currentSlide = index;
}

function nextSlide() {
    currentSlide = (currentSlide + 1) % slides.length;
    showSlide(currentSlide);
}

// Auto-advance slides every 5 seconds
setInterval(nextSlide, 5000);

// Handle indicator clicks
indicators.forEach((indicator, index) => {
    indicator.addEventListener('click', () => {
        showSlide(index);
    });
});

// Smooth scrolling for navigation links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();

        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            window.scrollTo({
                top: target.offsetTop - 80,
                behavior: 'smooth'
            });
        }
    });
});

// Add animation to elements when they come into view
const observerOptions = {
    root: null,
    rootMargin: '0px',
    threshold: 0.1
};

const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.style.opacity = 1;
            entry.target.style.transform = 'translateY(0)';
        }
    });
}, observerOptions);

// Observe all sections and cards
document.querySelectorAll('.section, .album-card, .research-card, .class-card, .event-card, .news-card').forEach(el => {
    el.style.opacity = 0;
    el.style.transform = 'translateY(20px)';
    el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
    observer.observe(el);
});